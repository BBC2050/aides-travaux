{
  "$id": "https://github.com/BBC2050/projet/schemas/maprimerenov",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Simulation",
  "description": "Simulation d'aides travaux",
  "type": "object",
  "properties": {
    "batiment": {
      "title": "Bâtiment",
      "label": "Bâtiment",
      "description": "Bâtiment faisant l'objet de travaux d'économies d'énergie",
      "type": "object",
      "properties": {
        "age": {
          "title": "Âge",
          "label": "Ancienneté",
          "description": "Ancienneté du bâtiment",
          "type": "integer",
          "minimum": 0
        },
        "bbc": {
          "title": "Rénovation BBC",
          "label": "Rénovation BBC",
          "description": "Etiquette énergie après travaux A ou B",
          "type": "boolean"
        },
        "etiquetteEnergie": {
          "title": "Etiquette énergie",
          "label": "Etiquette énergie",
          "description": "Etiquette énergie mesurée avant travaux",
          "type": "string",
          "enum": ["A", "B", "B", "C", "D", "E", "F", "G"]
        },
        "type": {
          "title": "Type",
          "label": "Type",
          "description": "Type de bâtiment",
          "type": "string",
          "enum": ["maison", "appartement", "immeuble"]
        }
      },
      "required": [
        "age",
        "bbc",
        "etiquetteEnergie",
        "type"
      ]
    },
    "beneficiaire": {
      "title": "Bénéficiaire",
      "label": "Bénéficiaire",
      "description": "Bénéficiaire des aides travaux",
      "type": "object",
      "properties": {
        "ptz": {
          "title": "PTZ",
          "label": "Bénéfice d'un prêt à taux zéro dans les cinq dernières années",
          "description": "Bénéfice d'un prêt à taux zéro dans les cinq dernières années",
          "type": "boolean"
        },
        "statut": {
          "title": "Statut",
          "label": "Statut",
          "description": "Statut du bénéficiaire",
          "type": "string",
          "enum": ["proprietaire_occupant", "proprietaire_bailleur", "locataire", "occupant_gratuit"]
        },
        "tranche": {
          "title": "Tranche de revenus",
          "label": "Tranche de revenus",
          "description": "Tranche de revenus du foyer",
          "type": "string",
          "enum": ["tres_modeste", "modeste", "intermediaire", "superieur"]
        }
      },
      "required": ["ptz", "statut", "tranche"]
    },
    "actions": {
      "title": "Liste des actions",
      "label": "Liste des actions",
      "description": "Liste des actions simulées",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "code": {
            "title": "Code de l'action",
            "label": "Code de l'action",
            "description": "Référence interne de l'action d'économies d'énergie",
            "type": "string",
            "pattern": "^[0-9]$"
          },
          "coutTotalTTC": {
            "title": "Cout total TTC",
            "label": "Cout total TTC",
            "description": "Cout total TTC de l'action d'économies d'énergie",
            "type": "number",
            "minimum": 0
          },
          "montantAides": {
            "title": "Montant des aides (hors CEE)",
            "label": "Montant des aides (hors CEE)",
            "description": "Montant des aides financières obtenue pour l'opération (hors Certificats d'économies d'énergie)",
            "type": "number",
            "minimum": 0
          },
          "montantCee": {
            "title": "Montant des aides CEE",
            "label": "Montant des aides CEE",
            "description": "Montant des aides financirèes obtenues pour l'opération dans le cadre du dispositif des Certificats d'économies d'énergie (CEE)",
            "type": "number",
            "minimum": 0
          },
          "quantite": {
            "title": "Quantité",
            "label": "Quantité",
            "description": "Surface en m² ou nombre d'équipements installé dans le cadre de l'opération",
            "type": "number",
            "minimum": 0
          }
        },
        "required": [
          "coutTotalTTC",
          "montantAides",
          "montantCee",
          "quantite"
        ]
      }
    },
    "dispositifs": {
      "title": "Liste des dispositifs",
      "label": "Liste des dispositifs",
      "description": "Liste des dispositifs simulés",
      "type": "array",
      "uniqueItems": true,
      "items": {
        "type": "string",
        "constant": "mpr"
      }
    }
  },
  "required": [
    "batiment",
    "beneficiaire",
    "action",
    "dispositifs"
  ]
}
